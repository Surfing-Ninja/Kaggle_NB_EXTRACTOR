{"cells":[{"metadata":{},"cell_type":"markdown","source":"This is a very basic sample submission to show you how to submit a file from a Kaggle Kernel. There are three steps: \n\n1. Training our model\n2. Use our model to make predictions\n3. Submitting our predictions in a submission file\n\nLet's work through a quick submission!"},{"metadata":{},"cell_type":"markdown","source":"# Training model"},{"metadata":{},"cell_type":"markdown","source":"First we'll train an XGBoost model to predict housing prices using all the provided features."},{"metadata":{"_uuid":"051d70d956493feee0c6d64651c6a088724dca2a","_execution_state":"idle","trusted":true,"_kg_hide-output":true},"cell_type":"code","source":"library(tidyverse)\nlibrary(caret)\nlibrary(xgboost)\n\ntraining_data <- read_csv(\"../input/train.csv\", )\n\nset.seed(1234)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_kg_hide-output":false},"cell_type":"code","source":"# index for splitting data in testing & training\ntrainIndex <- createDataPartition(training_data$SalePrice, p = .8, \n                                  list = FALSE, \n                                  times = 1)\n\n# convert training data to matrix\ntraining_data_matrix <- training_data %>%\n    select(-SalePrice) %>%\n    mutate_if(is.character, as.factor) %>% # convert strings to factors\n    mutate_if(is.factor, as.numeric) %>% # label encode categorical factors\n    select_if(is.numeric) %>%\n    as.matrix()\n\n# train XGBoost model with training data\nxgboost_model <- xgboost(data = training_data_matrix[trainIndex,],\n        label = training_data$SalePrice[trainIndex],\n        nrounds = 40, eval_metric=\"mae\") # using same metric as comp.","execution_count":null,"outputs":[]},{"metadata":{},"cell_type":"markdown","source":"Our trained model is preforming pretty well on our training set, but let's check using the testing data we set aside to make sure we're not overfitting. (If we have much worse performance on our testing data, that would suggest we were overfitting.)"},{"metadata":{"trusted":true},"cell_type":"code","source":"# generate predictions for our held-out testing data\npred <- predict(xgboost_model, training_data_matrix[-trainIndex, ])\n\n# get & print the classification error\nerr <- mean(pred - training_data$SalePrice[-trainIndex])\nprint(paste(\"test-error=\", err))","execution_count":null,"outputs":[]},{"metadata":{},"cell_type":"markdown","source":"Great, looks like we're not overfitting! Now let's make our final predictions."},{"metadata":{},"cell_type":"markdown","source":"# Saving Predictions "},{"metadata":{},"cell_type":"markdown","source":"Here we're di"},{"metadata":{"trusted":true,"_kg_hide-output":true},"cell_type":"code","source":"# read in test data (won't have labels)\ntest_data <- read_csv(\"../input/test.csv\")\n\n# convert testing data to matrix (using same techniques\n# we used for our training data)\ntest_data_matrix <- test_data %>%\n    # convert strings to factors\n    mutate_if(is.character, as.factor) %>% \n    # label encode categorical factors\n    mutate_if(is.factor, as.numeric) %>% \n    select_if(is.numeric) %>%\n    as.matrix()\n\n# predict prices\nsubmission_predictions <- predict(xgboost_model, \n                                  test_data_matrix)\n\n# format csv as specificed in competition discription\nprediction_file <- tibble(Id = test_data$Id, \n                         SalePrice = submission_predictions)\n\n# save file\nwrite_csv(prediction_file, \"submission.csv\")","execution_count":null,"outputs":[]},{"metadata":{},"cell_type":"markdown","source":"# Submitting our predictions\n\nNow that we've written the code to save our model out, there are just a few things left to do:\n\n1.  **Commit** our notebook. This will run all our code top to bottom and create the output file we need to submit. \n2.  **Submit** the output file. Once our notebook is done commiting, we can go to the commited version by clicking the \"Open Version\" button in the commit window. Then scroll down to the output file and click the \"Submit to Competition\" button. \n\nAnd that's all you need to do to make your first Kaggle comepetition submission. "}],"metadata":{"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"3.4.2","file_extension":".r","codemirror_mode":"r"}},"nbformat":4,"nbformat_minor":1}